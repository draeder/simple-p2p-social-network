<!doctype html>
<html>
<head>
    <title>Simple P2P Social Network</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.0/css/bulma.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tweetnacl/1.0.3/nacl-fast.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/eventemitter3/4.0.4/index.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/localforage/1.9.0/localforage.min.js"></script>
    <script src="https://chr15m.github.io/bugout/bugout.min.js"></script>
    <script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>
    <script src="spsn-api.js"></script>
</head>
<body>
    <main class="section">
        <div class="columns is-mobile is-centered">
            <spsn-qr class="is-column" size="103x103"></spsn-qr>
        </div>
        <div class="columns is-mobile is-centered">
            <spsn-status class="tag is-column"></spsn-status>
            <spsn-peercount class="tag is-column"></spsn-peercount>
        </div>
        <section class="section container" style="padding-top: 0px;">
            <h1 class="title">Simple P2P Social Network</h1>
            <h2 class="title is-5">spsn-api example</h2>
            <input id="post" class="input" type="text"></input>
        </section>
        <section class="section container" id="posts">
            <!-- New Posts & replies will appear here-->
        </section>
    </main>

    <script type="text/javascript">

        let spsn = new SPSN({
            // connectURL: default value is "https://social.peer.ooo/spsn-api/" 
            // This is hosted on GitHub Pages as a rally point/connection helper for your convenience
            connectURL: "https://social.peer.ooo/spsn-api/", 

            // awaitingTxt: Custom text when waiting for connections
            awaitingTxt: "Waiting for peers . . .",

            // connectedTxt: Custom text when peers are connected
            connectedTxt: "Peers connected!",
        },
            //"My custom identifier"
        )

        // Get your instance's address
        console.log(`Your joinable address: https://social.peer.ooo/spsn-api/example.html?p=${spsn.instance.address()}`)
        
        // Create a profile
        SPSN.profile({
            firstname: "Bob",
            lastname: "Tester",
            email: "",
            about: ""
        })

        // Create a new post
        SPSN.post({
            type: "post", //post, reply, share
            message: "my message",
            date: new Date(), 
            icons: [{share: "fa", reply: "fa", like: "fa"}],
            postId: generateId()//generateId(length)
        })

        spsn.message.on("something", function(msg){
            console.log(msg)
        })

        spsn.message.emit("message","test")
    
        // Follow peers
    
        // Handle new follower request
    
        // Create a new post
    
        // Reply to an existing post
    
        // Handle incoming profile
        
        // Handle incoming post
    
        // Handle incoming reply
    
        // Re-share a post
    
    </script>    
</body>


</html>